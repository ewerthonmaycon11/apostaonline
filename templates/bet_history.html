{% extends "base.html" %}
{% block title %}HistÃ³rico de Apostas{% endblock %}

{% block conteudo %}
<div class="container py-4">
  <h3 class="mb-4">ðŸ“œ HistÃ³rico de Apostas</h3>

  {% if apostas %}
    {% for aposta in apostas %}
      <div class="aposta mb-4 p-3 border rounded shadow-sm bg-light">
        <div>
          <strong>ID {{ aposta.id }}</strong> â€¢ {{ aposta.criado_em_fmt }}
        </div>

        <div class="mt-1">
          <span class="badge 
            {% if aposta.status.lower() == 'ganho' %}bg-success
            {% elif aposta.status.lower() == 'perdido' %}bg-danger
            {% else %}bg-warning text-dark{% endif %}">
            {{ aposta.status }}
          </span>
        </div>

        <div class="mt-2">
          Stake: R$ {{ "%.2f"|format(aposta.stake) }} â€”
          Odd total: {{ aposta.total_odd }} â€”
          Potencial: R$ {{ "%.2f"|format(aposta.potential) }}
        </div>

        {% if detalhes_por_aposta.get(aposta.id) %}
          <ul class="mt-3 list-group">
            {% for item in detalhes_por_aposta[aposta.id] %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  {{ item.time_a }} x {{ item.time_b }}<br>
                  <small>{{ item.escolha }} â€” Odd: {{ item.odd }}</small>
                </div>
                <span class="badge 
                  {% if item.resultado and item.resultado.lower() == 'ganho' %}bg-success
                  {% elif item.resultado and item.resultado.lower() == 'perdido' %}bg-danger
                  {% else %}bg-secondary{% endif %}">
                  {{ item.resultado or 'pendente' }}
                </span>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <p class="text-muted">Nenhuma aposta encontrada no histÃ³rico.</p>
  {% endif %}
</div>
{% endblock %}
