{% extends "base.html" %}
{% block title %}Minhas Apostas{% endblock %}

{% block conteudo %}
<h4 class="mb-3">Histórico de Apostas</h4>

<div class="card p-3">
  {% for b in bets %}
    <div class="mb-3 border-bottom pb-2">
      <div class="d-flex justify-content-between">
        <div><strong>ID {{ b.id }}</strong> • <small class="small-muted">{{ b.criado_em }}</small></div>
        <div><strong>{{ b.status|capitalize }}</strong></div>
      </div>
      <div class="small-muted">
        Stake: R$ {{ '%.2f' % b.stake }} — Odd total: {{ '%.2f' % b.total_odd }} — Potencial: R$ {{ '%.2f' % b.potential }}
      </div>

      <ul class="mt-2">
        {% for s in b.selections %}
          <li>
            {% if s.tipo == 'principal' %}
              <strong>Principal</strong> •
              {% if s.escolha == 'A' %}
                Escolha: A — Vitória {{ s.time_a }}
              {% elif s.escolha == 'B' %}
                Escolha: B — Vitória {{ s.time_b }}
              {% elif s.escolha == 'X' %}
                Escolha: X — Empate
              {% else %}
                Escolha: {{ s.time }}
              {% endif %}
              — Odd: {{ '%.2f' % s.odd }} • Resultado: {{ s.resultado }}
              {% if s.time_a or s.time_b %}
                • {{ s.time_a }} x {{ s.time_b }}
                {% if s.data_hora %}
                  em {{ s.data_hora }}
                {% endif %}
              {% endif %}
            {% else %}
              <strong>Extra</strong> • {{ s.escolha }} — Odd: {{ '%.2f' % s.odd }} • Resultado: {{ s.resultado }}
              {% if s.time_a or s.time_b %}
                • {{ s.time_a }} x {{ s.time_b }}
                {% if s.data_hora %}
                  em {{ s.data_hora }}
                {% endif %}
              {% endif %}
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <div class="small-muted">Você ainda não fez apostas.</div>
  {% endfor %}
</div>
{% endblock %}
